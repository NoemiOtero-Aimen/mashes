<launch>
  <param name="/use_sim_time" value="true"/>

  <arg name="gui" default="True" />
  <arg name="filename" default="test.bag" />
  <node name="player" pkg="rosbag" type="play" output="screen" args="$(arg filename) --clock -r 0.1" />

  <node name="viewer_nir" pkg="image_view" type="image_view" if="$(arg gui)">
    <remap from="image" to="/camera/image" />
  </node>

  <node name="viewer_nit" pkg="image_view" type="image_view" if="$(arg gui)">
    <remap from="image" to="/tachyon/image" />
  </node>

  <include file="$(find mashes_control)/launch/control.launch" />

  <arg name="model" value="$(find etna_workcell)/urdf/mashes_workcell.xacro" />
  <param name="robot_description" command="$(find xacro)/xacro.py $(arg model)" />

  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />

  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find mashes_workcell)/config/workcell.rviz" required="true" if="$(arg gui)" />
</launch>
